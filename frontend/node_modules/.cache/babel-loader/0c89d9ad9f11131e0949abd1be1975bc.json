{"ast":null,"code":"import _asyncToGenerator from\"/Users/ziyizhang/Desktop/springboard/heroku/personal_ledger/fronend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/ziyizhang/Desktop/springboard/heroku/personal_ledger/fronend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/ziyizhang/Desktop/springboard/heroku/personal_ledger/fronend/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect,useContext}from'react';import LedgerApi from'../Api/api';import LoadingSpinner from'../common/LoadingSpinner';import UserContext from'../auth/UserContext';import ExpenseCardList from'./ExpenseCardList';import{useNavigate}from\"react-router-dom\";import EarningCard from'../MUI/DashBoard/EarningCard';import{jsx as _jsx}from\"react/jsx-runtime\";function TotalExpenses(){var _useContext=useContext(UserContext),currentUser=_useContext.currentUser,setCurrentUser=_useContext.setCurrentUser;var history=useNavigate();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),expenses=_useState2[0],setExpenses=_useState2[1];var CurrentUser=currentUser.user.username;;useEffect(function getExpenses(){getUserExpenses(CurrentUser);},[]);var newDate=new Date();var month=newDate.getMonth()+1;var year=newDate.getFullYear();function getUserExpenses(_x){return _getUserExpenses.apply(this,arguments);}function _getUserExpenses(){_getUserExpenses=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(username){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return LedgerApi.getCurrentExpenses(username);case 2:result=_context.sent;console.log(result);setExpenses(result);case 5:case\"end\":return _context.stop();}}},_callee);}));return _getUserExpenses.apply(this,arguments);}function addExpense(evt){evt.preventDefault();history(\"/expenses/add\");}function currentMonth(evt){evt.preventDefault();history(\"/expenses/currentmonth\");}function currentYear(evt){evt.preventDefault();history(\"/expenses/year/\".concat(year));}if(!expenses)return/*#__PURE__*/_jsx(LoadingSpinner,{});console.log(expenses.length);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{children:expenses.expenses.length?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(ExpenseCardList,{expenses:expenses.expenses})}):/*#__PURE__*/_jsx(\"p\",{className:\"lead\",children:\"Sorry, no results were found!\"})})});}export default TotalExpenses;","map":{"version":3,"names":["React","useState","useEffect","useContext","LedgerApi","LoadingSpinner","UserContext","ExpenseCardList","useNavigate","EarningCard","TotalExpenses","currentUser","setCurrentUser","history","expenses","setExpenses","CurrentUser","user","username","getExpenses","getUserExpenses","newDate","Date","month","getMonth","year","getFullYear","getCurrentExpenses","result","console","log","addExpense","evt","preventDefault","currentMonth","currentYear","length"],"sources":["/Users/ziyizhang/Desktop/springboard/heroku/personal_ledger/fronend/src/expenses/TotalExpenses.js"],"sourcesContent":["import React, {useState,useEffect,useContext} from 'react';\nimport LedgerApi from '../Api/api';\nimport LoadingSpinner from '../common/LoadingSpinner'\nimport UserContext from '../auth/UserContext';\nimport ExpenseCardList from './ExpenseCardList';\nimport { useNavigate } from \"react-router-dom\";\nimport EarningCard from '../MUI/DashBoard/EarningCard';\n\n\n\n\nfunction TotalExpenses(){\n\n    const {currentUser, setCurrentUser} = useContext(UserContext);\n\n    const history = useNavigate();\n\n    const [expenses, setExpenses] = useState(null);\n\n    const CurrentUser = currentUser.user.username;;\n\n    useEffect(function getExpenses(){\n        getUserExpenses(CurrentUser);\n    },[]);\n\n    let newDate = new Date;\n\n    let month = newDate.getMonth()+1;\n    let year = newDate.getFullYear();\n\n    async function getUserExpenses(username){\n        let result = await LedgerApi.getCurrentExpenses(username);\n        console.log(result);\n        setExpenses(result)\n    }\n\n    function addExpense (evt){\n        evt.preventDefault();\n        history(`/expenses/add`);\n    }\n\n    function currentMonth (evt){\n        evt.preventDefault();\n        history(`/expenses/currentmonth`);\n    }\n\n    function currentYear (evt){\n        evt.preventDefault();\n        history(`/expenses/year/${year}`);\n    }\n\n    if(!expenses) return <LoadingSpinner />;\n\n    console.log(expenses.length);\n\n    return (\n        <div>\n            <div>\n                {/* <button onClick={addExpense}>Add New Expense</button>\n                <button onClick={currentMonth}>Current Month Expenses</button> */}\n                {expenses.expenses.length\n                    ?<div><ExpenseCardList expenses={expenses.expenses}/>\n                        </div>\n                    :<p className=\"lead\">Sorry, no results were found!</p>\n                }\n               \n                {/* <button onClick={currentYear}>Current Annual Expenses</button> */}\n            </div>\n            \n        </div>\n    )\n\n}\n\nexport default TotalExpenses;"],"mappings":"8cAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAwBC,SAAxB,CAAkCC,UAAlC,KAAmD,OAAnD,CACA,MAAOC,CAAAA,SAAP,KAAsB,YAAtB,CACA,MAAOC,CAAAA,cAAP,KAA2B,0BAA3B,CACA,MAAOC,CAAAA,WAAP,KAAwB,qBAAxB,CACA,MAAOC,CAAAA,eAAP,KAA4B,mBAA5B,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,MAAOC,CAAAA,WAAP,KAAwB,8BAAxB,C,2CAKA,QAASC,CAAAA,aAAT,EAAwB,CAEpB,gBAAsCP,UAAU,CAACG,WAAD,CAAhD,CAAOK,WAAP,aAAOA,WAAP,CAAoBC,cAApB,aAAoBA,cAApB,CAEA,GAAMC,CAAAA,OAAO,CAAGL,WAAW,EAA3B,CAEA,cAAgCP,QAAQ,CAAC,IAAD,CAAxC,wCAAOa,QAAP,eAAiBC,WAAjB,eAEA,GAAMC,CAAAA,WAAW,CAAGL,WAAW,CAACM,IAAZ,CAAiBC,QAArC,CAA8C,CAE9ChB,SAAS,CAAC,QAASiB,CAAAA,WAAT,EAAsB,CAC5BC,eAAe,CAACJ,WAAD,CAAf,CACH,CAFQ,CAEP,EAFO,CAAT,CAIA,GAAIK,CAAAA,OAAO,CAAG,GAAIC,CAAAA,IAAJ,EAAd,CAEA,GAAIC,CAAAA,KAAK,CAAGF,OAAO,CAACG,QAAR,GAAmB,CAA/B,CACA,GAAIC,CAAAA,IAAI,CAAGJ,OAAO,CAACK,WAAR,EAAX,CAjBoB,QAmBLN,CAAAA,eAnBK,yJAmBpB,iBAA+BF,QAA/B,mJACuBd,CAAAA,SAAS,CAACuB,kBAAV,CAA6BT,QAA7B,CADvB,QACQU,MADR,eAEIC,OAAO,CAACC,GAAR,CAAYF,MAAZ,EACAb,WAAW,CAACa,MAAD,CAAX,CAHJ,sDAnBoB,kDAyBpB,QAASG,CAAAA,UAAT,CAAqBC,GAArB,CAAyB,CACrBA,GAAG,CAACC,cAAJ,GACApB,OAAO,iBAAP,CACH,CAED,QAASqB,CAAAA,YAAT,CAAuBF,GAAvB,CAA2B,CACvBA,GAAG,CAACC,cAAJ,GACApB,OAAO,0BAAP,CACH,CAED,QAASsB,CAAAA,WAAT,CAAsBH,GAAtB,CAA0B,CACtBA,GAAG,CAACC,cAAJ,GACApB,OAAO,0BAAmBY,IAAnB,EAAP,CACH,CAED,GAAG,CAACX,QAAJ,CAAc,mBAAO,KAAC,cAAD,IAAP,CAEde,OAAO,CAACC,GAAR,CAAYhB,QAAQ,CAACsB,MAArB,EAEA,mBACI,kCACI,qBAGKtB,QAAQ,CAACA,QAAT,CAAkBsB,MAAlB,cACI,kCAAK,KAAC,eAAD,EAAiB,QAAQ,CAAEtB,QAAQ,CAACA,QAApC,EAAL,EADJ,cAGI,UAAG,SAAS,CAAC,MAAb,2CANT,EADJ,EADJ,CAiBH,CAED,cAAeJ,CAAAA,aAAf"},"metadata":{},"sourceType":"module"}