{"ast":null,"code":"import _asyncToGenerator from\"/Users/ziyizhang/Desktop/springboard/heroku/personal_ledger/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/ziyizhang/Desktop/springboard/heroku/personal_ledger/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/ziyizhang/Desktop/springboard/heroku/personal_ledger/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect,useContext}from'react';import LedgerApi from'../Api/api';import LoadingSpinner from'../common/LoadingSpinner';import UserContext from'../auth/UserContext';import ExpenseCardList from'./ExpenseCardList';import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AnnualExpenses(){var _useContext=useContext(UserContext),currentUser=_useContext.currentUser,setCurrentUser=_useContext.setCurrentUser;var history=useNavigate();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),expenses=_useState2[0],setExpenses=_useState2[1];var CurrentUser=currentUser.user.username;;useEffect(function getExpenses(){getUserExpenses(CurrentUser);},[]);var newDate=new Date();var year=newDate.getFullYear();function getUserExpenses(_x){return _getUserExpenses.apply(this,arguments);}function _getUserExpenses(){_getUserExpenses=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(username){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return LedgerApi.getByYear(username,year);case 2:result=_context.sent;console.log(result);setExpenses(result);case 5:case\"end\":return _context.stop();}}},_callee);}));return _getUserExpenses.apply(this,arguments);}function handleSubmit(evt){evt.preventDefault();history(\"/expenses/add\");}if(!expenses)return/*#__PURE__*/_jsx(LoadingSpinner,{});console.log(expenses.length);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[expenses.expenses.length?/*#__PURE__*/_jsx(ExpenseCardList,{expenses:expenses.expenses}):/*#__PURE__*/_jsx(\"p\",{className:\"lead\",children:\"Sorry, no results were found!\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Add New Expense\"})]})});}export default AnnualExpenses;","map":{"version":3,"names":["React","useState","useEffect","useContext","LedgerApi","LoadingSpinner","UserContext","ExpenseCardList","useNavigate","AnnualExpenses","currentUser","setCurrentUser","history","expenses","setExpenses","CurrentUser","user","username","getExpenses","getUserExpenses","newDate","Date","year","getFullYear","getByYear","result","console","log","handleSubmit","evt","preventDefault","length"],"sources":["/Users/ziyizhang/Desktop/springboard/heroku/personal_ledger/frontend/src/expenses/AnnualExpenses.js"],"sourcesContent":["import React, {useState,useEffect,useContext} from 'react';\nimport LedgerApi from '../Api/api';\nimport LoadingSpinner from '../common/LoadingSpinner'\nimport UserContext from '../auth/UserContext';\nimport ExpenseCardList from './ExpenseCardList';\nimport { useNavigate } from \"react-router-dom\";\n\n\n\n\nfunction AnnualExpenses(){\n\n    const {currentUser, setCurrentUser} = useContext(UserContext);\n\n    const history = useNavigate();\n\n    const [expenses, setExpenses] = useState(null);\n\n    const CurrentUser = currentUser.user.username;;\n\n    useEffect(function getExpenses(){\n        getUserExpenses(CurrentUser);\n    },[]);\n\n    let newDate = new Date;\n\n    let year = newDate.getFullYear();\n\n    async function getUserExpenses(username){\n        let result = await LedgerApi.getByYear(username,year);\n        console.log(result);\n        setExpenses(result)\n    }\n\n    function handleSubmit (evt){\n        evt.preventDefault();\n        history(`/expenses/add`);\n    }\n\n    if(!expenses) return <LoadingSpinner />;\n\n    console.log(expenses.length);\n\n    return (\n        <div>\n            <div>\n                {expenses.expenses.length\n                    ?<ExpenseCardList expenses={expenses.expenses}/>\n                    :<p className=\"lead\">Sorry, no results were found!</p>\n                }\n                <button onClick={handleSubmit}>Add New Expense</button>\n            </div>\n            \n        </div>\n    )\n\n}\n\nexport default AnnualExpenses;"],"mappings":"idAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAwBC,SAAxB,CAAkCC,UAAlC,KAAmD,OAAnD,CACA,MAAOC,CAAAA,SAAP,KAAsB,YAAtB,CACA,MAAOC,CAAAA,cAAP,KAA2B,0BAA3B,CACA,MAAOC,CAAAA,WAAP,KAAwB,qBAAxB,CACA,MAAOC,CAAAA,eAAP,KAA4B,mBAA5B,CACA,OAASC,WAAT,KAA4B,kBAA5B,C,wFAKA,QAASC,CAAAA,cAAT,EAAyB,CAErB,gBAAsCN,UAAU,CAACG,WAAD,CAAhD,CAAOI,WAAP,aAAOA,WAAP,CAAoBC,cAApB,aAAoBA,cAApB,CAEA,GAAMC,CAAAA,OAAO,CAAGJ,WAAW,EAA3B,CAEA,cAAgCP,QAAQ,CAAC,IAAD,CAAxC,wCAAOY,QAAP,eAAiBC,WAAjB,eAEA,GAAMC,CAAAA,WAAW,CAAGL,WAAW,CAACM,IAAZ,CAAiBC,QAArC,CAA8C,CAE9Cf,SAAS,CAAC,QAASgB,CAAAA,WAAT,EAAsB,CAC5BC,eAAe,CAACJ,WAAD,CAAf,CACH,CAFQ,CAEP,EAFO,CAAT,CAIA,GAAIK,CAAAA,OAAO,CAAG,GAAIC,CAAAA,IAAJ,EAAd,CAEA,GAAIC,CAAAA,IAAI,CAAGF,OAAO,CAACG,WAAR,EAAX,CAhBqB,QAkBNJ,CAAAA,eAlBM,yJAkBrB,iBAA+BF,QAA/B,mJACuBb,CAAAA,SAAS,CAACoB,SAAV,CAAoBP,QAApB,CAA6BK,IAA7B,CADvB,QACQG,MADR,eAEIC,OAAO,CAACC,GAAR,CAAYF,MAAZ,EACAX,WAAW,CAACW,MAAD,CAAX,CAHJ,sDAlBqB,kDAwBrB,QAASG,CAAAA,YAAT,CAAuBC,GAAvB,CAA2B,CACvBA,GAAG,CAACC,cAAJ,GACAlB,OAAO,iBAAP,CACH,CAED,GAAG,CAACC,QAAJ,CAAc,mBAAO,KAAC,cAAD,IAAP,CAEda,OAAO,CAACC,GAAR,CAAYd,QAAQ,CAACkB,MAArB,EAEA,mBACI,kCACI,uBACKlB,QAAQ,CAACA,QAAT,CAAkBkB,MAAlB,cACI,KAAC,eAAD,EAAiB,QAAQ,CAAElB,QAAQ,CAACA,QAApC,EADJ,cAEI,UAAG,SAAS,CAAC,MAAb,2CAHT,cAKI,eAAQ,OAAO,CAAEe,YAAjB,6BALJ,GADJ,EADJ,CAaH,CAED,cAAenB,CAAAA,cAAf"},"metadata":{},"sourceType":"module"}