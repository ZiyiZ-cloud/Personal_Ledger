{"ast":null,"code":"import _asyncToGenerator from\"/Users/ziyizhang/Desktop/springboard/heroku/personal_ledger/fronend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/ziyizhang/Desktop/springboard/heroku/personal_ledger/fronend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/ziyizhang/Desktop/springboard/heroku/personal_ledger/fronend/node_modules/@babel/runtime/regenerator/index.js\";import React,{Component,useEffect,useState}from'react';import LedgerApi from'../Api/api';import LoadingSpinner from'./LoadingSpinner';import{Line,Bar}from'react-chartjs-2';import Chart from'chart.js/auto';import{Avatar,Box,Grid,Menu,MenuItem,Typography}from'@mui/material';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LineChart(_ref){var username=_ref.username,year=_ref.year,month=_ref.month,chartTitle=_ref.chartTitle;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),income=_useState2[0],setIncome=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),expense=_useState4[0],setExpense=_useState4[1];// const [ totalIncome,setTotalIncome] = useState(null);\nfunction getdailyData(_x,_x2,_x3){return _getdailyData.apply(this,arguments);}function _getdailyData(){_getdailyData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(username,year,month){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.t0=setIncome;_context.next=3;return LedgerApi.getIncomesByDay(username,year,month);case 3:_context.t1=_context.sent;(0,_context.t0)(_context.t1);_context.t2=setExpense;_context.next=8;return LedgerApi.getExpensesByDay(username,year,month);case 8:_context.t3=_context.sent;(0,_context.t2)(_context.t3);case 10:case\"end\":return _context.stop();}}},_callee);}));return _getdailyData.apply(this,arguments);}useEffect(function getDailyData(){getdailyData(username,year,month);console.log(expense,income);},[]);if(!income)return/*#__PURE__*/_jsx(LoadingSpinner,{});if(!expense)return/*#__PURE__*/_jsx(LoadingSpinner,{});// if(!totalIncome) return <LoadingSpinner />;\nvar data={labels:expense.dailyExpense.map(function(x){return x[0];}),datasets:[{id:1,label:'Expnese',data:expense.dailyExpense.map(function(x){return x[1];}),borderColor:\"red\",backgroundColor:\"red\"},{id:2,label:'Income',data:income.dailyIncome.map(function(x){return x[1];}),borderColor:\"blue\",backgroundColor:\"blue\"}]};return/*#__PURE__*/_jsx(\"div\",{className:\"container mt-5\",children:/*#__PURE__*/_jsxs(Grid,{item:true,xs:9,children:[/*#__PURE__*/_jsx(\"h2\",{children:chartTitle}),/*#__PURE__*/_jsx(Bar,{datasetIdKey:\"id\",data:data})]})});}export default LineChart;","map":{"version":3,"names":["React","Component","useEffect","useState","LedgerApi","LoadingSpinner","Line","Bar","Chart","Avatar","Box","Grid","Menu","MenuItem","Typography","LineChart","username","year","month","chartTitle","income","setIncome","expense","setExpense","getdailyData","getIncomesByDay","getExpensesByDay","getDailyData","console","log","data","labels","dailyExpense","map","x","datasets","id","label","borderColor","backgroundColor","dailyIncome"],"sources":["/Users/ziyizhang/Desktop/springboard/heroku/personal_ledger/fronend/src/common/MonthlyLineChart.js"],"sourcesContent":["import React, { Component,useEffect,useState } from 'react'\nimport LedgerApi from '../Api/api';\nimport LoadingSpinner from './LoadingSpinner';\nimport { Line,Bar } from 'react-chartjs-2';\nimport Chart from 'chart.js/auto';\nimport { Avatar, Box, Grid, Menu, MenuItem, Typography } from '@mui/material';\n\n\n\n\nfunction LineChart({username,year,month,chartTitle}) {\n\n  const [income,setIncome] = useState(null);\n  const [expense,setExpense] = useState(null);\n  // const [ totalIncome,setTotalIncome] = useState(null);\n\n  async function getdailyData(username,year,month){\n    setIncome(await LedgerApi.getIncomesByDay(username,year,month));\n    setExpense( await LedgerApi.getExpensesByDay(username,year,month));\n    // setTotalIncome ( await LedgerApi.getMonthlyTotalIncome(username,year,month))\n  }\n\n    useEffect(function getDailyData(){\n      getdailyData(username,year,month);\n      console.log(expense,income);\n    },[])\n\n    if(!income) return <LoadingSpinner />;\n    if(!expense) return <LoadingSpinner />;\n    // if(!totalIncome) return <LoadingSpinner />;\n\n    let data = {\n      labels: expense.dailyExpense.map(x=>x[0]),\n      datasets: [\n        {\n          id: 1,\n          label: 'Expnese',\n          data: expense.dailyExpense.map(x=>x[1]),\n          borderColor: \"red\",\n          backgroundColor: \"red\",\n        },\n        {\n          id: 2,\n          label: 'Income',\n          data: income.dailyIncome.map(x=>x[1]),\n          borderColor:\"blue\",\n          backgroundColor:\"blue\",\n        },\n      ],\n    }\n\n    return (\n      <div className=\"container mt-5\">\n      <Grid item xs={9}>\n        <h2>{chartTitle}</h2>\n        <Bar\n          datasetIdKey='id'\n          data={data}\n        />\n      </Grid>\n      </div>\n      \n    )\n}\n\nexport default LineChart;\n"],"mappings":"8cAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA0BC,SAA1B,CAAoCC,QAApC,KAAoD,OAApD,CACA,MAAOC,CAAAA,SAAP,KAAsB,YAAtB,CACA,MAAOC,CAAAA,cAAP,KAA2B,kBAA3B,CACA,OAASC,IAAT,CAAcC,GAAd,KAAyB,iBAAzB,CACA,MAAOC,CAAAA,KAAP,KAAkB,eAAlB,CACA,OAASC,MAAT,CAAiBC,GAAjB,CAAsBC,IAAtB,CAA4BC,IAA5B,CAAkCC,QAAlC,CAA4CC,UAA5C,KAA8D,eAA9D,C,wFAKA,QAASC,CAAAA,SAAT,MAAqD,IAAjCC,CAAAA,QAAiC,MAAjCA,QAAiC,CAAxBC,IAAwB,MAAxBA,IAAwB,CAAnBC,KAAmB,MAAnBA,KAAmB,CAAbC,UAAa,MAAbA,UAAa,CAEnD,cAA2BhB,QAAQ,CAAC,IAAD,CAAnC,wCAAOiB,MAAP,eAAcC,SAAd,eACA,eAA6BlB,QAAQ,CAAC,IAAD,CAArC,yCAAOmB,OAAP,eAAeC,UAAf,eACA;AAJmD,QAMpCC,CAAAA,YANoC,wJAMnD,iBAA4BR,QAA5B,CAAqCC,IAArC,CAA0CC,KAA1C,8HACEG,SADF,uBACkBjB,CAAAA,SAAS,CAACqB,eAAV,CAA0BT,QAA1B,CAAmCC,IAAnC,CAAwCC,KAAxC,CADlB,2EAEEK,UAFF,uBAEoBnB,CAAAA,SAAS,CAACsB,gBAAV,CAA2BV,QAA3B,CAAoCC,IAApC,CAAyCC,KAAzC,CAFpB,sHANmD,+CAYjDhB,SAAS,CAAC,QAASyB,CAAAA,YAAT,EAAuB,CAC/BH,YAAY,CAACR,QAAD,CAAUC,IAAV,CAAeC,KAAf,CAAZ,CACAU,OAAO,CAACC,GAAR,CAAYP,OAAZ,CAAoBF,MAApB,EACD,CAHQ,CAGP,EAHO,CAAT,CAKA,GAAG,CAACA,MAAJ,CAAY,mBAAO,KAAC,cAAD,IAAP,CACZ,GAAG,CAACE,OAAJ,CAAa,mBAAO,KAAC,cAAD,IAAP,CACb;AAEA,GAAIQ,CAAAA,IAAI,CAAG,CACTC,MAAM,CAAET,OAAO,CAACU,YAAR,CAAqBC,GAArB,CAAyB,SAAAC,CAAC,QAAEA,CAAAA,CAAC,CAAC,CAAD,CAAH,EAA1B,CADC,CAETC,QAAQ,CAAE,CACR,CACEC,EAAE,CAAE,CADN,CAEEC,KAAK,CAAE,SAFT,CAGEP,IAAI,CAAER,OAAO,CAACU,YAAR,CAAqBC,GAArB,CAAyB,SAAAC,CAAC,QAAEA,CAAAA,CAAC,CAAC,CAAD,CAAH,EAA1B,CAHR,CAIEI,WAAW,CAAE,KAJf,CAKEC,eAAe,CAAE,KALnB,CADQ,CAQR,CACEH,EAAE,CAAE,CADN,CAEEC,KAAK,CAAE,QAFT,CAGEP,IAAI,CAAEV,MAAM,CAACoB,WAAP,CAAmBP,GAAnB,CAAuB,SAAAC,CAAC,QAAEA,CAAAA,CAAC,CAAC,CAAD,CAAH,EAAxB,CAHR,CAIEI,WAAW,CAAC,MAJd,CAKEC,eAAe,CAAC,MALlB,CARQ,CAFD,CAAX,CAoBA,mBACE,YAAK,SAAS,CAAC,gBAAf,uBACA,MAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,CAAf,wBACE,oBAAKpB,UAAL,EADF,cAEE,KAAC,GAAD,EACE,YAAY,CAAC,IADf,CAEE,IAAI,CAAEW,IAFR,EAFF,GADA,EADF,CAYH,CAED,cAAef,CAAAA,SAAf"},"metadata":{},"sourceType":"module"}