{"ast":null,"code":"import _defineProperty from\"/Users/ziyizhang/Desktop/springboard/heroku/personal_ledger/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/ziyizhang/Desktop/springboard/heroku/personal_ledger/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/ziyizhang/Desktop/springboard/heroku/personal_ledger/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/ziyizhang/Desktop/springboard/heroku/personal_ledger/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/ziyizhang/Desktop/springboard/heroku/personal_ledger/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect,useContext}from'react';import LedgerApi from'../Api/api';import LoadingSpinner from'../common/LoadingSpinner';import UserContext from'../auth/UserContext';import ExpenseCardList from'./ExpenseCardList';import{useNavigate}from\"react-router-dom\";import{AdapterDateFns}from'@mui/x-date-pickers/AdapterDateFns';import{DatePicker,MonthPicker,YearPicker,CalendarPicker,LocalizationProvider}from'@mui/lab';import{Grid,Button,Box,Container}from'@mui/material';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var minDate=new Date('2020-01-01T00:00:00.000');var maxDate=new Date('2034-01-01T00:00:00.000');function SearchMonthly(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),date=_useState2[0],setDate=_useState2[1];var _useContext=useContext(UserContext),currentUser=_useContext.currentUser,setCurrentUser=_useContext.setCurrentUser;var _useState3=useState({date:\"\"}),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],setFormData=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),formErrors=_useState6[0],setFormErrors=_useState6[1];var history=useNavigate();var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),expenses=_useState8[0],setExpenses=_useState8[1];var CurrentUser=currentUser.user.username;;useEffect(function getExpenses(){getUserExpenses(CurrentUser);},[]);var newDate=new Date();var month=newDate.getMonth()+1;var year=newDate.getFullYear();function getUserExpenses(_x){return _getUserExpenses.apply(this,arguments);}function _getUserExpenses(){_getUserExpenses=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(username){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return LedgerApi.getByMonth(username,year,month);case 2:result=_context.sent;console.log(result);setExpenses(result);case 5:case\"end\":return _context.stop();}}},_callee);}));return _getUserExpenses.apply(this,arguments);}function addExpense(evt){evt.preventDefault();history(\"/expenses/add\");}/** Handle form data changing */function handleChange(evt){var _evt$target=evt.target,name=_evt$target.name,value=_evt$target.value;setFormData(function(f){return _objectSpread(_objectSpread({},f),{},_defineProperty({},name,value));});setFormErrors([]);}function selectedMonth(evt){evt.preventDefault();var newYear;var newMonth;var newDate=new Date(date);newYear=newDate.getFullYear();newMonth=newDate.getMonth()+1;console.log(newMonth.newYear);history(\"/expenses/year/\".concat(newYear,\"/month/\").concat(newMonth));}if(!expenses)return/*#__PURE__*/_jsx(LoadingSpinner,{});console.log(expenses.length);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(LocalizationProvider,{dateAdapter:AdapterDateFns,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(CalendarPicker,{date:date,onChange:function onChange(newDate){return setDate(newDate);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(MonthPicker,{date:date,minDate:minDate,maxDate:maxDate,onChange:function onChange(newDate){return setDate(newDate);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:11,md:5}),/*#__PURE__*/_jsx(Box,{textAlign:\"center\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",style:{justifyContent:'center'},onClick:selectedMonth,children:\"Search By Month\"})})]})})});}export default SearchMonthly;","map":{"version":3,"names":["React","useState","useEffect","useContext","LedgerApi","LoadingSpinner","UserContext","ExpenseCardList","useNavigate","AdapterDateFns","DatePicker","MonthPicker","YearPicker","CalendarPicker","LocalizationProvider","Grid","Button","Box","Container","minDate","Date","maxDate","SearchMonthly","date","setDate","currentUser","setCurrentUser","formData","setFormData","formErrors","setFormErrors","history","expenses","setExpenses","CurrentUser","user","username","getExpenses","getUserExpenses","newDate","month","getMonth","year","getFullYear","getByMonth","result","console","log","addExpense","evt","preventDefault","handleChange","target","name","value","f","selectedMonth","newYear","newMonth","length","justifyContent"],"sources":["/Users/ziyizhang/Desktop/springboard/heroku/personal_ledger/frontend/src/expenses/SearchMonthly.js"],"sourcesContent":["import React, {useState,useEffect,useContext} from 'react';\nimport LedgerApi from '../Api/api';\nimport LoadingSpinner from '../common/LoadingSpinner'\nimport UserContext from '../auth/UserContext';\nimport ExpenseCardList from './ExpenseCardList';\nimport { useNavigate } from \"react-router-dom\";\nimport { AdapterDateFns } from '@mui/x-date-pickers/AdapterDateFns';\nimport {DatePicker,MonthPicker,YearPicker,CalendarPicker,LocalizationProvider} from '@mui/lab';\nimport { Grid,Button,Box , Container} from '@mui/material';\n\n\n\n\nconst minDate = new Date('2020-01-01T00:00:00.000');\nconst maxDate = new Date('2034-01-01T00:00:00.000');\n\nfunction SearchMonthly(){\n    const [date, setDate] = useState(null)\n\n\n    const {currentUser, setCurrentUser} = useContext(UserContext);\n    const [formData, setFormData] = useState({\n        date: \"\",\n    });\n    const [formErrors, setFormErrors] = useState([]);\n\n    const history = useNavigate();\n\n    const [expenses, setExpenses] = useState(null);\n\n    const CurrentUser = currentUser.user.username;;\n\n    useEffect(function getExpenses(){\n        getUserExpenses(CurrentUser);\n    },[]);\n\n    let newDate = new Date;\n\n    let month = newDate.getMonth()+1;\n    let year = newDate.getFullYear();\n\n\n    async function getUserExpenses(username){\n        let result = await LedgerApi.getByMonth(username,year,month);\n        console.log(result);\n        setExpenses(result)\n    }\n\n    function addExpense (evt){\n        evt.preventDefault();\n        history(`/expenses/add`);\n    }\n\n    /** Handle form data changing */\n    function handleChange(evt) {\n        const { name, value } = evt.target;\n        setFormData(f => ({\n            ...f,\n            [name]: value,\n        }));\n        setFormErrors([]);\n        }\n\n    function selectedMonth (evt){\n        evt.preventDefault();\n        let newYear;\n        let newMonth;\n        let newDate = new Date(date)\n        newYear = newDate.getFullYear();\n        newMonth = newDate.getMonth()+1;\n        console.log(newMonth.newYear);\n        history(`/expenses/year/${newYear}/month/${newMonth}`);\n    }\n\n    if(!expenses) return <LoadingSpinner />;\n\n    console.log(expenses.length);\n\n    return (\n        <div>\n            {/* <div>\n                <form onSubmit={selectedMonth}>\n                <div className=\"form-group\">\n                  <label>Date</label>\n                  <input\n                    type=\"date\"\n                      name=\"date\"\n                      className=\"form-control\"\n                      value={formData.date}\n                      onChange={handleChange}\n                  />\n                </div>\n                <button onClick={selectedMonth}>Search Monthly Expenses</button>\n                </form>\n            </div> */}\n            <LocalizationProvider dateAdapter={AdapterDateFns}>\n                <Grid container spacing={3}>\n                    <Grid item xs={12} md={6}>\n                    <CalendarPicker date={date} onChange={(newDate) => setDate(newDate)} />\n                    </Grid>\n                    <Grid item xs={12} md={6}>\n                    <MonthPicker\n                        date={date}\n                        minDate={minDate}\n                        maxDate={maxDate}\n                        onChange={(newDate) => setDate(newDate)}\n                    />\n                    </Grid>\n                    <Grid item xs={11} md={5}>\n                    {/* <YearPicker\n                        date={date}\n                        minDate={minDate}\n                        maxDate={maxDate}\n                        isDateDisabled={() => false}\n                        onChange={(newDate) => setDate(newDate)}\n                    /> */}\n                    </Grid>\n                    <Box textAlign='center'>\n                    <Button variant='contained' style={{justifyContent: 'center'}} onClick={selectedMonth}>\n                        Search By Month\n                    </Button>\n                    </Box>\n                </Grid>\n                </LocalizationProvider>\n                {/* <button onClick={selectedMonth}>Search Monthly Expenses</button> */}\n                {/* <Grid container justify=\"center\">\n                    <Button color=\"primary\" size=\"large\" type=\"submit\" variant=\"contained\">\n                    Sign Up\n                    </Button>\n                </Grid>\n                <Button\n                    justify='center'\n                    color=\"secondary\"\n                    variant=\"contained\"\n                    size=\"large\"\n                    component=\"a\"\n                    onClick={selectedMonth}\n                    sx={{ minWidth: 200 }}\n                >\n                    Search Monthly Expense\n                </Button>\n             */}\n        </div>\n    )\n\n}\n\nexport default SearchMonthly;"],"mappings":"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"},"metadata":{},"sourceType":"module"}